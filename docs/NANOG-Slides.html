<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Route Sherlock - NANOG Presentation</title>
    <style>
        @page {
            size: landscape;
            margin: 0;
        }
        * {
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: #f0f0f0;
        }
        .slide {
            width: 1024px;
            height: 768px;
            background: white;
            margin: 20px auto;
            padding: 60px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            page-break-after: always;
            position: relative;
        }
        .slide-number {
            position: absolute;
            bottom: 20px;
            right: 30px;
            color: #999;
            font-size: 14pt;
        }
        h1 {
            color: #0066cc;
            font-size: 36pt;
            margin: 0 0 30px 0;
        }
        h2 {
            color: #333;
            font-size: 28pt;
            margin: 0 0 40px 0;
            border-bottom: 3px solid #0066cc;
            padding-bottom: 15px;
        }
        .title-slide {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .title-slide h1 {
            font-size: 42pt;
            margin-bottom: 20px;
        }
        .title-slide .subtitle {
            font-size: 24pt;
            color: #666;
            margin-bottom: 60px;
        }
        .title-slide .author {
            font-size: 20pt;
            color: #333;
        }
        .title-slide .event {
            font-size: 16pt;
            color: #999;
            margin-top: 10px;
        }
        ul {
            font-size: 22pt;
            line-height: 1.6;
            margin: 0;
            padding-left: 40px;
        }
        li {
            margin: 15px 0;
        }
        .demo-box {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 25px;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14pt;
            margin: 20px 0;
            line-height: 1.5;
        }
        .demo-box .cmd {
            color: #569cd6;
        }
        .demo-box .good {
            color: #4ec9b0;
        }
        .demo-box .warn {
            color: #dcdcaa;
        }
        .demo-box .highlight {
            color: #ce9178;
        }
        .demo-box .comment {
            color: #6a9955;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 18pt;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 15px 20px;
            text-align: left;
        }
        th {
            background: #0066cc;
            color: white;
        }
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        .two-col {
            display: flex;
            gap: 40px;
        }
        .two-col > div {
            flex: 1;
        }
        .big-number {
            font-size: 72pt;
            font-weight: bold;
            color: #0066cc;
            text-align: center;
            margin: 30px 0;
        }
        .big-text {
            font-size: 28pt;
            text-align: center;
            color: #333;
        }
        .highlight-box {
            background: #fff3e0;
            border-left: 6px solid #ff9800;
            padding: 25px;
            margin: 20px 0;
            font-size: 20pt;
        }
        .success-box {
            background: #e8f5e9;
            border-left: 6px solid #4caf50;
            padding: 25px;
            margin: 20px 0;
            font-size: 20pt;
        }
        .quote {
            font-size: 28pt;
            font-style: italic;
            color: #555;
            text-align: center;
            margin: 60px 40px;
            line-height: 1.5;
        }
        .score-table td:nth-child(2) {
            text-align: center;
            font-weight: bold;
        }
        .green { color: #4caf50; }
        .yellow { color: #ff9800; }
        .red { color: #f44336; }
        .center {
            text-align: center;
        }
        .smaller {
            font-size: 16pt;
        }
    </style>
</head>
<body>

<!-- Slide 1: Title -->
<div class="slide title-slide">
    <h1>Peer Risk Intelligence</h1>
    <div class="subtitle">Should You Peer With That ASN?</div>
    <div class="author">[Your Name]</div>
    <div class="event">NANOG [XX] | [Date]</div>
    <div class="slide-number">1</div>
</div>

<!-- Slide 2: The Problem -->
<div class="slide">
    <h2>The Problem</h2>
    <div class="quote">"Is this network safe to peer with?"</div>
    <ul>
        <li>Peering decisions based on <strong>PeeringDB + gut feel</strong></li>
        <li>No visibility into routing behavior before peering</li>
        <li>Discover problems <em>after</em> the BGP session is up</li>
        <li>Route leaks and hijacks from peers are expensive</li>
    </ul>
    <div class="slide-number">2</div>
</div>

<!-- Slide 3: Real Incident -->
<div class="slide">
    <h2>Real Example: Cloudflare 1.1.1.1 (June 2024)</h2>
    <ul>
        <li>AS267613 (Eletronet) announced 1.1.1.1/32</li>
        <li>AS262504 leaked 1.1.1.0/24 to upstreams</li>
        <li>Affected traffic for <strong>7+ hours</strong></li>
        <li>Would you have peered with AS267613?</li>
    </ul>
    <div class="highlight-box">
        <strong>Question:</strong> Could we have known this network was risky <em>before</em> the incident?
    </div>
    <div class="slide-number">3</div>
</div>

<!-- Slide 4: Introducing Route Sherlock -->
<div class="slide">
    <h2>Introducing Route Sherlock</h2>
    <p style="font-size: 22pt;">Open-source CLI tool for <strong>Peer Risk Intelligence</strong></p>
    <div class="two-col" style="margin-top: 40px;">
        <div>
            <h3 style="color: #0066cc;">Data Sources</h3>
            <ul style="font-size: 18pt;">
                <li>RIPEstat (BGP data)</li>
                <li>PeeringDB (network metadata)</li>
                <li>BGPStream (historical archives)</li>
                <li>Claude API (AI synthesis)</li>
            </ul>
        </div>
        <div>
            <h3 style="color: #0066cc;">Key Features</h3>
            <ul style="font-size: 18pt;">
                <li>Peer risk scoring</li>
                <li>Historical backtesting</li>
                <li>IX overlap analysis</li>
                <li>AI-powered reports</li>
            </ul>
        </div>
    </div>
    <div class="slide-number">4</div>
</div>

<!-- Slide 5: Demo Command -->
<div class="slide">
    <h2>The Command</h2>
    <div class="demo-box">
<span class="cmd">$ route-sherlock peer-risk AS64500</span>

<span class="comment"># Options:</span>
<span class="cmd">$ route-sherlock peer-risk AS64500 --my-asn AS13335</span>  <span class="comment"># IX overlap</span>
<span class="cmd">$ route-sherlock peer-risk AS64500 --days 180</span>        <span class="comment"># Extended history</span>
<span class="cmd">$ route-sherlock peer-risk AS64500 --ai</span>              <span class="comment"># AI analysis</span>
    </div>
    <div class="slide-number">5</div>
</div>

<!-- Slide 6: Demo - Cloudflare -->
<div class="slide">
    <h2>Demo: Scoring Cloudflare (AS13335)</h2>
    <div class="demo-box">
<span class="cmd">$ route-sherlock peer-risk AS13335</span>

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Peer Risk Score â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ <span class="good">100/100</span> (100.0%)                                            â•‘
â•‘ Risk Level: <span class="good">LOW</span>                                              â•‘
â•‘ Recommendation: <span class="good">RECOMMENDED</span>                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Network: CLOUDFLARENET | Type: Content | Policy: Open | IXes: 350
    </div>
    <p style="font-size: 20pt; color: #4caf50; text-align: center;"><strong>âœ“ Perfect score - safe to peer</strong></p>
    <div class="slide-number">6</div>
</div>

<!-- Slide 7: Demo - Eletronet -->
<div class="slide">
    <h2>Demo: Scoring Eletronet (AS267613)</h2>
    <div class="demo-box">
<span class="cmd">$ route-sherlock peer-risk AS267613</span>

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Peer Risk Score â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ <span class="warn">72/100</span> (72.0%)                                             â•‘
â•‘ Risk Level: <span class="warn">MODERATE</span>                                        â•‘
â•‘ Recommendation: <span class="warn">ACCEPTABLE WITH MONITORING</span>                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Stability: <span class="warn">5/30</span> - High churn: <span class="highlight">1637 updates/day</span> (-25)

âš ï¸ Warning: High BGP churn detected
    </div>
    <p style="font-size: 20pt; color: #ff9800; text-align: center;"><strong>âš  Flagged BEFORE the incident occurred</strong></p>
    <div class="slide-number">7</div>
</div>

<!-- Slide 8: Scoring Algorithm -->
<div class="slide">
    <h2>Scoring Algorithm (100 points)</h2>
    <table class="score-table">
        <tr><th>Category</th><th>Max</th><th>What We Check</th></tr>
        <tr><td>Maturity</td><td>20</td><td>PeeringDB presence, IRR as-set, policy URL, IX count</td></tr>
        <tr><td>Stability</td><td>30</td><td>BGP update frequency (churn detection)</td></tr>
        <tr><td>Incident History</td><td>30</td><td>Upstream diversity, topology redundancy</td></tr>
        <tr><td>Policy</td><td>10</td><td>Open (+10), Selective (+7), Restrictive (+3)</td></tr>
        <tr><td>Security</td><td>10</td><td>IRR registration, transit relationships</td></tr>
    </table>
    <div class="slide-number">8</div>
</div>

<!-- Slide 9: Risk Levels -->
<div class="slide">
    <h2>Risk Levels & Recommendations</h2>
    <table>
        <tr><th>Score</th><th>Risk Level</th><th>Recommendation</th></tr>
        <tr><td>80-100</td><td class="green"><strong>LOW</strong></td><td>Recommended - standard peering process</td></tr>
        <tr><td>60-79</td><td class="yellow"><strong>MODERATE</strong></td><td>Acceptable - implement monitoring</td></tr>
        <tr><td>40-59</td><td style="color: darkorange;"><strong>ELEVATED</strong></td><td>Caution - strict prefix limits, IRR filtering</td></tr>
        <tr><td>0-39</td><td class="red"><strong>HIGH</strong></td><td>Not recommended - decline or require remediation</td></tr>
    </table>
    <div class="slide-number">9</div>
</div>

<!-- Slide 10: Stability Deep Dive -->
<div class="slide">
    <h2>Stability Score: BGP Churn Detection</h2>
    <div class="two-col">
        <div>
            <h3>How it works</h3>
            <ul style="font-size: 18pt;">
                <li>Query RIPEstat for BGP updates</li>
                <li>Calculate updates per day</li>
                <li>Deduct points for high churn</li>
            </ul>
            <div style="margin-top: 30px; font-size: 16pt;">
                <strong>Thresholds:</strong><br>
                &lt;10/day = Stable (no penalty)<br>
                10-50/day = Some activity<br>
                50-100/day = Moderate churn<br>
                &gt;100/day = High churn (major penalty)
            </div>
        </div>
        <div>
            <h3>Real Results</h3>
            <table style="font-size: 16pt;">
                <tr><th>ASN</th><th>Updates/Day</th><th>Score</th></tr>
                <tr><td>AS13335</td><td>Low</td><td class="green">30/30</td></tr>
                <tr><td>AS15169</td><td>Low</td><td class="green">30/30</td></tr>
                <tr><td>AS267613</td><td>1,637</td><td class="red">5/30</td></tr>
            </table>
        </div>
    </div>
    <div class="slide-number">10</div>
</div>

<!-- Slide 11: IX Overlap -->
<div class="slide">
    <h2>IX Overlap Analysis</h2>
    <div class="demo-box">
<span class="cmd">$ route-sherlock peer-risk AS15169 --my-asn AS13335</span>

## IX Overlap
   Common IXes: <span class="good">164</span>
   Your IXes: 350 | Target IXes: 198
   <span class="good">âœ“ Can peer at 164 location(s)</span>
    </div>
    <ul>
        <li>Instantly see where you can peer</li>
        <li>No need to manually compare PeeringDB</li>
        <li>Useful for peering coordinators</li>
    </ul>
    <div class="slide-number">11</div>
</div>

<!-- Slide 12: Backtesting -->
<div class="slide">
    <h2>Historical Backtesting</h2>
    <div class="demo-box">
<span class="cmd">$ route-sherlock backtest 1.1.1.0/24 --origin AS13335 \</span>
<span class="cmd">    --time "2024-06-27 18:00" --duration 8h</span>

ğŸš¨ Anomalies Detected: <span class="highlight">329</span>

#1 [HIGH] ROUTE LEAK
   Time: <span class="highlight">2024-06-27T18:49:06</span>
   AS Path: 50763 â†’ 1031 â†’ <span class="highlight">262504 â†’ 267613</span> â†’ 13335

ğŸ“… Timeline:
   First anomaly: 18:49:06 UTC
   Duration: 7.6 hours
    </div>
    <div class="slide-number">12</div>
</div>

<!-- Slide 13: Validation -->
<div class="slide">
    <h2>Validation: Did It Work?</h2>
    <div class="two-col">
        <div>
            <h3>Cloudflare's Report</h3>
            <ul style="font-size: 18pt;">
                <li>Incident started: ~18:51 UTC</li>
                <li>AS267613 announced 1.1.1.1/32</li>
                <li>AS262504 leaked to upstreams</li>
                <li>Duration: ~7.5 hours</li>
            </ul>
        </div>
        <div>
            <h3>Route Sherlock Found</h3>
            <ul style="font-size: 18pt;">
                <li>First anomaly: <strong>18:49:06 UTC</strong></li>
                <li>Identified AS267613 âœ“</li>
                <li>Identified AS262504 âœ“</li>
                <li>Duration: 7.6 hours âœ“</li>
            </ul>
        </div>
    </div>
    <div class="success-box">
        <strong>âœ“ Detected 2 minutes before</strong> Cloudflare's reported start time
    </div>
    <div class="slide-number">13</div>
</div>

<!-- Slide 14: AI Synthesis -->
<div class="slide">
    <h2>AI-Powered Analysis (Optional)</h2>
    <div class="demo-box" style="font-size: 12pt;">
<span class="cmd">$ route-sherlock peer-risk AS267613 --ai</span>

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AI-Generated Risk Assessment â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                    â”‚
â”‚ <span class="good">**Executive Summary**</span>                                          â”‚
â”‚ Conditional peer. AS267613 shows concerning stability metrics      â”‚
â”‚ with 1,637 BGP updates/day. If peering is necessary, implement     â”‚
â”‚ strict safeguards.                                                 â”‚
â”‚                                                                    â”‚
â”‚ <span class="good">**Technical Safeguards**</span>                                       â”‚
â”‚ â€¢ Max-prefix limit: 15 (they announce 7 prefixes)                  â”‚
â”‚ â€¢ Require IRR filtering against RADB::AS-267613                    â”‚
â”‚ â€¢ Enable RPKI-invalid rejection                                    â”‚
â”‚ â€¢ Configure BGP session alerting for prefix changes                â”‚
â”‚                                                                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
    </div>
    <div class="slide-number">14</div>
</div>

<!-- Slide 15: What Makes This Different -->
<div class="slide">
    <h2>How Is This Different?</h2>
    <table style="font-size: 16pt;">
        <tr><th>Feature</th><th>BGPalerter</th><th>ARTEMIS</th><th>Radar</th><th>Route Sherlock</th></tr>
        <tr><td>Real-time monitoring</td><td class="green">âœ“</td><td class="green">âœ“</td><td class="green">âœ“</td><td class="red">âœ—</td></tr>
        <tr><td>Historical backtesting</td><td class="red">âœ—</td><td class="red">âœ—</td><td>Limited</td><td class="green">âœ“</td></tr>
        <tr><td>Peer risk scoring</td><td class="red">âœ—</td><td class="red">âœ—</td><td class="red">âœ—</td><td class="green">âœ“</td></tr>
        <tr><td>AI analysis</td><td class="red">âœ—</td><td class="red">âœ—</td><td class="red">âœ—</td><td class="green">âœ“</td></tr>
        <tr><td>"Should I peer?"</td><td class="red">âœ—</td><td class="red">âœ—</td><td class="red">âœ—</td><td class="green">âœ“</td></tr>
        <tr><td>Open source</td><td class="green">âœ“</td><td class="green">âœ“</td><td class="red">âœ—</td><td class="green">âœ“</td></tr>
    </table>
    <div class="highlight-box" style="margin-top: 20px;">
        <strong>Key insight:</strong> BGPalerter monitors YOUR prefixes. Route Sherlock evaluates OTHER networks before you peer.
    </div>
    <div class="slide-number">15</div>
</div>

<!-- Slide 16: Practical Safeguards -->
<div class="slide">
    <h2>Practical Safeguards by Risk Level</h2>
    <table style="font-size: 14pt;">
        <tr><th>Risk</th><th>Max-Prefix</th><th>IRR Filter</th><th>RPKI</th><th>Monitoring</th></tr>
        <tr>
            <td class="green">LOW</td>
            <td>2x announced</td>
            <td>Standard</td>
            <td>Warn on invalid</td>
            <td>Standard</td>
        </tr>
        <tr>
            <td class="yellow">MODERATE</td>
            <td>1.5x announced</td>
            <td>Strict</td>
            <td>Reject invalid</td>
            <td>Alert on changes</td>
        </tr>
        <tr>
            <td style="color: darkorange;">ELEVATED</td>
            <td>1.2x announced</td>
            <td>Strict + verify</td>
            <td>Reject invalid</td>
            <td>Alert + review</td>
        </tr>
        <tr>
            <td class="red">HIGH</td>
            <td colspan="4" style="text-align: center;">Decline or require remediation first</td>
        </tr>
    </table>
    <p style="font-size: 18pt; margin-top: 30px;">Tool provides specific recommendations based on their actual prefix count and IRR registration.</p>
    <div class="slide-number">16</div>
</div>

<!-- Slide 17: Getting Started -->
<div class="slide">
    <h2>Getting Started</h2>
    <div class="demo-box">
<span class="comment"># Install</span>
<span class="cmd">$ pip install route-sherlock</span>

<span class="comment"># For historical backtesting</span>
<span class="cmd">$ brew install bgpstream</span>
<span class="cmd">$ pip install pybgpstream</span>

<span class="comment"># Optional: AI synthesis</span>
<span class="cmd">$ export ANTHROPIC_API_KEY="your-key"</span>

<span class="comment"># Run</span>
<span class="cmd">$ route-sherlock peer-risk AS64500</span>
    </div>
    <div class="slide-number">17</div>
</div>

<!-- Slide 18: Summary -->
<div class="slide">
    <h2>Summary</h2>
    <ul>
        <li><strong>Problem:</strong> No tool answers "Should I peer with this ASN?"</li>
        <li><strong>Solution:</strong> Route Sherlock - Peer Risk Intelligence</li>
        <li><strong>How:</strong> Combines RIPEstat + PeeringDB + BGPStream + AI</li>
        <li><strong>Validated:</strong> Correctly flags networks involved in real incidents</li>
        <li><strong>Practical:</strong> Outputs actionable recommendations</li>
    </ul>
    <div class="success-box" style="margin-top: 30px;">
        <strong>Try it:</strong> Score a network you're considering peering with today
    </div>
    <div class="slide-number">18</div>
</div>

<!-- Slide 19: Q&A -->
<div class="slide title-slide">
    <h1>Questions?</h1>
    <div class="subtitle" style="margin-top: 40px;">
        GitHub: [your-repo-url]<br><br>
        [your-email]<br><br>
        [your-twitter/linkedin]
    </div>
    <div class="slide-number">19</div>
</div>

<!-- Slide 20: Backup - Architecture -->
<div class="slide">
    <h2>Backup: Architecture</h2>
    <div class="demo-box" style="font-size: 12pt;">
route_sherlock/
â”œâ”€â”€ cli/
â”‚   â”œâ”€â”€ main.py          <span class="comment"># Typer CLI entry point</span>
â”‚   â””â”€â”€ commands.py      <span class="comment"># Command implementations</span>
â”œâ”€â”€ collectors/
â”‚   â”œâ”€â”€ ripestat.py      <span class="comment"># RIPEstat API client</span>
â”‚   â”œâ”€â”€ peeringdb.py     <span class="comment"># PeeringDB API client</span>
â”‚   â””â”€â”€ bgpstream.py     <span class="comment"># Historical BGP archives</span>
â””â”€â”€ synthesis/
    â””â”€â”€ engine.py        <span class="comment"># AI synthesis with Claude</span>
    </div>
    <ul style="font-size: 18pt; margin-top: 20px;">
        <li>Python 3.11+ with async/await</li>
        <li>Rich for terminal UI</li>
        <li>pybgpstream for RouteViews/RIPE RIS</li>
    </ul>
    <div class="slide-number">20</div>
</div>

</body>
</html>
